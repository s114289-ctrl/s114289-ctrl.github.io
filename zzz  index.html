<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>獨輪車表演動作編排</title>
  <style>
    :root {
      --bg: #e0f2fe;
      --panel: #ffffff;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --accent: #0ea5e9;
      --accent-2: #38bdf8;
      --border: #bae6fd;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", sans-serif;
      background: linear-gradient(180deg, #bae6fd, #e0f2fe 40%, #f0f9ff);
      color: var(--text);
    }
    header { background: rgba(255,255,255,.85); border-bottom: 1px solid var(--border); }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    nav { display:flex; justify-content:space-between; align-items:center; }
    section { padding: 32px 20px; }
    .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 20px; padding: 20px; }
    .grid { display:grid; grid-template-columns: repeat(4,1fr); gap:16px; }
    .card { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:12px; cursor:pointer; text-align:center; }
    .card.selected { outline: 3px solid var(--accent); }
    .timeline { display:flex; gap:12px; overflow-x:auto; padding:12px 4px; }
    .timeline-card { min-width:180px; border:2px dashed var(--accent); border-radius:16px; padding:12px; background:#fff; }
    .segment { background: linear-gradient(135deg,#7dd3fc,#bae6fd); border-radius:12px; padding:10px; font-weight:600; text-align:center; }
    .timeline-time { font-size:12px; color:var(--muted); margin-bottom:6px; }
    .btn { padding:10px 16px; border-radius:999px; border:none; background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; cursor:pointer; }
  </style>
</head>
<body>
<header>
  <div class="container">
    <nav>
      <strong>獨輪車表演動作編排</strong>
    </nav>
  </div>
</header>

<main>
  <!-- 動作資料庫 -->
  <section>
    <div class="container panel">
      <h3>動作資料庫（點選要使用的動作）</h3>
      <div class="grid" id="moveLibrary"></div>
    </div>
  </section>

  <!-- 表演設定 -->
  <section>
    <div class="container panel">
      <h3>表演設定</h3>
      <label>表演時間（分鐘）</label>
      <input id="showTime" type="number" value="3" min="1" />
      <br><br>
      <button class="btn" id="generate">隨機編排表演流程</button>
    </div>
  </section>

  <!-- 表演流程結果 -->
  <section>
    <div class="container">
      <h2>表演流程時間軸</h2>
      <div class="timeline" id="performanceTimeline"></div>
    </div>
  </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const library = document.getElementById('moveLibrary');
  const timeline = document.getElementById('performanceTimeline');
  const btn = document.getElementById('generate');

  const moves = [
    { name: '伸腿滑行', url: 'https://youtu.be/rSuc8ct6D4g?si=8reJpf2hRl2GNMYA', seconds: 10  },
    { name: '直線滑行', url: 'https://youtu.be/-cJzVjuldUQ?si=G2qn-NC7V_dCYB2X', seconds: 10  },
    { name: '定車', url: 'https://youtu.be/fI5sAqVVaeM?si=eptyKEuWmDFl8fG0', seconds: 5  },
    { name: '圓規轉', url: 'https://youtu.be/b3__n2hb8Hw?si=7QT07crxg2A02iKM', seconds: 5  },
    { name: '旋轉', url: 'https://youtu.be/imk0Pn8Jpkc?si=VAAa1kRzg2v24hOY', seconds: 5  },
    { name: '撥輪前進', url: 'https://youtu.be/TXZ80KbXtBw?si=VrrVoCGCV8z68bD1', seconds: 10  },
    { name: '後退', url: 'https://youtu.be/0d7tIj387Ws?si=SDpR34PJcyMNjNCM', seconds: 10  },
    { name: '前推座', url: 'https://youtu.be/euExyqlrhPw?si=Kw2pjaXlcJtdojjS', seconds: 20  },
    { name: '後推座', url: 'https://youtu.be/TT_mjHXy9ac?si=iQuPNkkGbTSBtW-Y', seconds: 20  },
    { name: '跨座圓規轉', url: 'https://youtu.be/OlO4RCAWIM0?si=oxb2C63OoCgfonI4', seconds: 10  },
    { name: '站立滑行', url: 'https://youtu.be/XMn9twbHswA?si=RgOGVPAWcr0wpx-A', seconds: 20  },
    { name: '站立後撥輪', url: 'https://youtu.be/RoOxXDlPNbg?si=W8EZJU3NCnG54Ufj', seconds: 10  }
  ];

  const selected = new Set();

  // 建立動作卡片
  moves.forEach(item => {
    const card = document.createElement('div');
    card.className = 'card';

    const title = document.createElement('div');
    title.textContent = item.name;
    title.style.fontWeight = '600';

    const link = document.createElement('a');
    link.href = item.url;
    link.target = '_blank';
    link.textContent = '示範影片';
    link.style.display = 'block';
    link.style.fontSize = '12px';
    link.style.color = 'var(--accent)';
    link.style.marginTop = '6px';

    link.addEventListener('click', (e) => e.stopPropagation());

    card.addEventListener('click', () => {
      card.classList.toggle('selected');
      if (selected.has(item.name)) selected.delete(item.name);
      else selected.add(item.name);
    });

    card.append(title, link);
    library.appendChild(card);
  });

  // 隨機取一個元素（真正隨機，不照順序）
  function randomPick(array) {
    return array[Math.floor(Math.random() * array.length)];
  }

  btn.addEventListener('click', () => {
    timeline.innerHTML = '';
    if (selected.size === 0) {
      alert('請先選擇至少一個動作');
      return;
    }

    const minutes = parseInt(document.getElementById('showTime').value || 3);
    const segments = minutes * 2; // 每分鐘 2 個動作段
    const per = Math.round((minutes * 60) / segments);

    const pool = [...selected];

    for (let i = 0; i < segments; i++) {
      const move = randomPick(pool); // 每一段都重新隨機抽
      const card = document.createElement('div');
      card.className = 'timeline-card';
      card.innerHTML = `<div class="timeline-time">${per}s</div><div class="segment">${move}</div>`;
      timeline.appendChild(card);
    }
  });
});
</script>
</body>
</html>
